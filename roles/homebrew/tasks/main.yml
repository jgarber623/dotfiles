- name: Tap public Homebrew repositories
  homebrew_tap:
    name: "{{ item }}"
  with_items: "{{ homebrew__public_taps }}"

- name: Tap private Homebrew repositories
  homebrew_tap:
    name: "{{ item.name }}"
    url: "{{ item.url }}"
  with_items: "{{ homebrew__private_taps}}"

- import_tasks: ../common/tasks/homebrew.yml
  vars:
    packages: "{{ homebrew__packages }}"

- name: Create Git template path
  file:
    path: "{{ homebrew__git_template_path }}"
    state: directory

- name: Create Git template
  copy:
    content: "ref: refs/heads/main"
    dest: "{{ homebrew__git_template_path }}/HEAD"

- import_tasks: ../common/tasks/link-config-files.yml
  vars:
    linked_files: "{{ homebrew__linked_files }}"

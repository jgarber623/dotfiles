- name: Install mas with Homebrew
  homebrew:
    name: mas
    state: latest

- name: Install applications with mas
  shell: "mas install {{ item.id }}"
  register: mas_install_result
  with_items: "{{ mas_applications }}"
  changed_when: "' is already installed' not in mas_install_result.stdout"
